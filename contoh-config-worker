Disable SELinux and swap memory on all nodes
$ vi /etc/selinux/config
[Disable SELinux]


  $ vi /etc/fstab
[Comment swap section]
$ hostnamectl set-hostname <host-name>
$ vi /etc/hosts
<ip-address> <hostname>
192.168.190.6 master
192.168.190.4 worker01
192.168.190.9 worker02
$ reboot
Configuring firewall-rules
$ firewall-cmd --permanent --add-port={179,10250,30000-32767}/tcp 
$ firewall-cmd --permanent --add-port=4789/udp 
$ firewall-cmd --reload
Load kernel modules and configure kernel parameters
$ vi /etc/modules-load.d/k8s.conf
overlay 
br_netfilter
$ vi /etc/sysctl.d/k8s.conf 
net.bridge.bridge-nf-call-iptables = 1 
net.ipv4.ip_forward = 1 
net.bridge.bridge-nf-call-ip6tables = 1
$ sysctl --system
Installing Container Runtime & yum utility
$ yum install -y yum-utils
$ yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
$ dnf install containerd.io -y
Modifying the system_cgroup variable value
$ mv /etc/containerd/config.toml /etc/containerd/config.toml.backup
$ containerd config default ï¼ž /etc/containerd/config.toml 2> /dev/null
$ vim /etc/containerd/config.toml
SystemdCgroup = true
$ sudo systemctl restart containerd
$ sudo systemctl enable containerd
Configure kubernetes repo
$ vi  /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://pkgs.k8s.io/core:/stable:/v1.28/rpm/
enabled=1
gpgcheck=1
gpgkey=https://pkgs.k8s.io/core:/stable:/v1.28/rpm/repodata/repomd.xml.key
exclude=kubelet kubeadm kubectl cri-tools kubernetes-cni
Installing kubernetes tools
$ yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes
Enabling kubelet service
$ systemctl enable kubelet
$ systemctl start kubelet
$ systemctl status kubelet
Configuring networking
$ kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.26.3/manifests/calico.yaml
Copy the kubeadm join command:
$ kubeadm join master:6443 --token rbs3i8.5kelv7xvewgb9h9o \
        --discovery-token-ca-cert-hash sha256:8f80e86f1f981684f75b9154d232e2d9f9b5ad43a23ec5ba86453ca6cf70029b
